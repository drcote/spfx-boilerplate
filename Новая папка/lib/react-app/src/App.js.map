{"version":3,"sources":["react-app/src/App.tsx"],"names":[],"mappings":";;;;;;;;;;;;AAAA,OAAO,EAAC,SAAS,EAAE,QAAQ,EAAC,MAAM,OAAO,CAAC;AAC1C,OAAO,EAAC,UAAU,EAAC,MAAM,sCAAsC,CAAC;AAGhE,IAAM,qBAAqB,GAAG;IAC1B,IAAM,MAAM,GAAG,IAAI,eAAe,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;IAC3D,OAAO,MAAM,CAAC,GAAG,CAAC,WAAW,CAAC,IAAI,eAAe,CAAA;AACrD,CAAC,CAAA;AAED,SAAS,QAAQ,CAAC,EAAc,EAAE,KAAa;IAC3C,IAAI,OAAe,CAAC;IACpB,OAAO;QACH,YAAY,CAAC,OAAO,CAAC,CAAC;QACtB,OAAO,GAAG,MAAM,CAAC,UAAU,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;IAC3C,CAAC,CAAC;AACN,CAAC;AAED,SAAS,GAAG;IACF,IAAA,KAAsB,QAAQ,CAA0B,IAAI,CAAC,EAA5D,MAAM,QAAA,EAAE,SAAS,QAA2C,CAAC;IACpE,IAAM,SAAS,GAAG,qBAAqB,EAAE,CAAC;IAC1C,OAAO,CAAC,GAAG,CAAC,aAAa,GAAG,SAAS,CAAC,CAAC;IAEvC,SAAS,CAAC;QACN,KAAK,CAAC,SAAS,EAAE,EAAC,KAAK,EAAE,UAAU,EAAC,CAAC;aAChC,IAAI,CAAC,UAAA,GAAG,IAAI,OAAA,GAAG,CAAC,IAAI,EAAE,EAAV,CAAU,CAAC;aACvB,IAAI,CAAC,UAAA,IAAI,IAAI,OAAA,SAAS,CAAC,IAAI,CAAC,EAAf,CAAe,CAAC;aAC7B,KAAK,CAAC,UAAA,GAAG,IAAI,OAAA,OAAO,CAAC,KAAK,CAAC,+BAA+B,EAAE,GAAG,CAAC,EAAnD,CAAmD,CAAC,CAAC;IAC3E,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,CAAA;IAEnB,qCAAqC;IACjC,SAAS,CAAC;QACN,IAAM,UAAU,GAAG;YACf,6BAA6B;YAC7B,IAAM,IAAI,GAAG,QAAQ,CAAC,eAAe,CAAC;YAEtC,IAAM,MAAM,GAAG,IAAI,CAAC,GAAG;YACnB,qBAAqB;YACrB,qBAAqB;YACrB,qBAAqB;YACrB,qBAAqB;YACrB,IAAI,CAAC,YAAY,CACpB,CAAC;YACF,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC,EAAC,IAAI,EAAE,QAAQ,EAAE,MAAM,QAAA,EAAC,EAAE,GAAG,CAAC,CAAC;QAC7D,CAAC,CAAA;QACD,IAAM,mBAAmB,GAAG,QAAQ,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;QAEpD,UAAU,EAAE,CAAC;QAEb,IAAM,QAAQ,GAAG,IAAI,cAAc,CAAC,mBAAmB,CAAC,CAAC;QACzD,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QAChC,OAAO;YACH,QAAQ,CAAC,UAAU,EAAE,CAAA;QACzB,CAAC,CAAA;IACL,CAAC,EAAE,EAAE,CAAC,CAAA;IAEN,IAAI,CAAC,MAAM;QAAE,OAAO,6JAA0B,CAAA;IAC9C,IAAI,MAAM;QAAE,OAAO,KAAC,UAAU,eAAK,MAAM,UAAG,CAAA;AAGhD,CAAC;AAED,eAAe,GAAG,CAAA","file":"react-app/src/App.js","sourcesContent":["import {useEffect, useState} from \"react\";\nimport {HelloWorld} from \"../../webparts/HelloWorld/components\";\nimport {IHelloWorldWebPartProps} from \"../../webparts/HelloWorld/HelloWorldWebPart\";\n\nconst getConfigUrlFromQuery = () => {\n    const params = new URLSearchParams(window.location.search);\n    return params.get('configUrl') || './config.json'\n}\n\nfunction debounce(fn: () => void, delay: number) {\n    let timeout: number;\n    return () => {\n        clearTimeout(timeout);\n        timeout = window.setTimeout(fn, delay);\n    };\n}\n\nfunction App() {\n    const [config, setConfig] = useState<IHelloWorldWebPartProps>(null);\n    const configUrl = getConfigUrlFromQuery();\n    console.log('configUrl: ' + configUrl);\n\n    useEffect(() => {\n        fetch(configUrl, {cache: 'no-cache'})\n            .then(res => res.json())\n            .then(data => setConfig(data))\n            .catch(err => console.error('Ошибка загрузки конфигурации:', err));\n    }, [configUrl])\n\n// отправка изменения высоты элемента\n    useEffect(() => {\n        const sendHeight = () => {\n            //const body = document.body;\n            const html = document.documentElement;\n\n            const height = Math.max(\n                // body.scrollHeight,\n                // body.offsetHeight,\n                // html.clientHeight,\n                // html.scrollHeight,\n                html.offsetHeight\n            );\n            window.parent.postMessage({type: 'resize', height}, '*');\n        }\n        const debouncedSendHeight = debounce(sendHeight, 2);\n\n        sendHeight();\n\n        const observer = new ResizeObserver(debouncedSendHeight);\n        observer.observe(document.body);\n        return () => {\n            observer.disconnect()\n        }\n    }, [])\n\n    if (!config) return <>Настройки не доступны</>\n    if (config) return <HelloWorld {...config}/>\n\n\n}\n\nexport default App\n"],"sourceRoot":"../../../src"}